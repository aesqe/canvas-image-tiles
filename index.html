<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>Canvas image tiles by elhigu</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Canvas image tiles</h1>
        <h2>Creates tiles from huge images with help of html5 canvas.</h2>

        <section id="downloads">
          <a href="https://github.com/elhigu/canvas-image-tiles/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/elhigu/canvas-image-tiles/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/elhigu/canvas-image-tiles" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h3>
          <a id="creating-tiles-from-huge-images-with-canvas-over-60fps" class="anchor" href="#creating-tiles-from-huge-images-with-canvas-over-60fps" aria-hidden="true">
            <span class="octicon octicon-link"></span>
          </a>
          Sampling tiles from huge images with canvas over 60fps
        </h3>
        <p>
          TODO: Couple of images why someone would like to use this...
          original image, and rotated image ready to be sliced.
        </p>
        <h4>What it does?</h4>
        <p>
          Read huge image from file -> write data to canvas and preview canvas -> apply
          rotate, scale, and translate to be able to read any part of
          original image to 256x256 sized tile.
          TODO: source image / result (and some functions to automatically resolve transformations from 4 points would be cool)
        </p>
        <h4>Challenges</h4>
        <p>
          Image() object might be stored to GPU (happened on Chrome) which causes really bad performance when destination canvas is in host memory. If both source and destination are canvases it is more probable that both are in the same memory (both in host or both in GPU). 
        </p>
        <p>
          Showing original image in &lt;img&gt; tag and scaling it with CSS is slow for big over 100Mpixel images.
        </p> 
      </section>
      <section>
        <h3>Try it</h3>
        <p>
          Reads file in, creates / shows preview (2048x2048) and starts read tiles 
          from random positions of the original source image. Tiles are read on 
          every animation frame (60fps) and drawn to other 256x256 sized tile canvas.
        </p>

        <h1>Split image to tiles in browser</h1>
        <span>Choose image:</span>
        <input type="file" id="file-input">
        <span>Tiles per second:</span>
        <span id="fps"></span><br/>
        <span>Image size:</span>
        <span id="image-info"></span>
        <div id="image-fitter">
          <div id="tile-selector-grid">
            <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
            <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
            <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
            <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
            <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
            <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
            <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
            <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
          </div>
          <div id="source-locator">
            <canvas id="preview"></canvas>
          </div>
          <div class="buttons">
            <div class="ctrl-btn move">M</div>
            <div class="ctrl-btn rotate">R</div>
            <div class="ctrl-btn scale">S</div>
          </div>
        </div>
        <canvas id="tile-out" width="256" height="256"></canvas>
      </section>
    </div>
    <script type="text/javascript" src="javascripts/tailor.js"></script>
 
  </body>
</html>
